{"ast":null,"code":"var _jsxFileName = \"/Users/dillirai/Downloads/Full-Stack-Development/Practice Full Stack dev /Practice/drf-blog-api-master/django/frontend/src/components/comments/blog-comment.js\",\n  _s = $RefreshSig$();\n// import { useState, useEffect } from 'react';\n\n// export default function Comments({ authToken, blogId, commentId }) {\n//   const [commentData, setCommentData] = useState(null);\n//   const [newComment, setNewComment] = useState('');\n\n//   useEffect(() => {\n//     fetch(`http://example.com/api/blog/${blogId}/comments/${commentId}/edit/`, {\n//       method: 'GET',\n//       headers: {\n//         Authorization: `Token ${authToken}`,\n//       },\n//     })\n//       .then((response) => response.json())\n//       .then((data) => setCommentData(data))\n//       .catch((error) => console.error(error));\n//   }, [authToken, blogId, commentId]);\n\n//   const handleSubmit = (event) => {\n//     event.preventDefault();\n\n//     fetch(`http://example.com/api/blog/${blogId}/comments/${commentId}/edit/`, {\n//       method: 'PUT',\n//       headers: {\n//         Authorization: `Token ${authToken}`,\n//         'Content-Type': 'application/json',\n//       },\n//       body: JSON.stringify({ comment: newComment }),\n//     })\n//       .then((response) => response.json())\n//       .then((data) => setCommentData(data))\n//       .catch((error) => console.error(error));\n//   };\n\n//   if (!commentData) {\n//     return <p>Loading...</p>;\n//   }\n\n//   return (\n//     <form onSubmit={handleSubmit}>\n//       <textarea\n//         value={newComment}\n//         onChange={(event) => setNewComment(event.target.value)}\n//       />\n//       <button type=\"submit\">Save</button>\n//     </form>\n//   );\n// }\n\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BlogComments(props) {\n  _s();\n  const [comments, setComments] = useState([]);\n  useEffect(() => {\n    const fetchComments = async () => {\n      try {\n        const response = await fetch(`http://localhost:8000/api/blog/${props.blogId}/comments/`, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n          }\n        });\n        const data = await response.json();\n        setComments(data);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    fetchComments();\n  }, [props.blogId]);\n  const handleCreateComment = async commentData => {\n    try {\n      const response = await fetch(`http://localhost:8000/api/blog/${props.blogId}/comments/`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n        },\n        body: JSON.stringify(commentData)\n      });\n      if (response.ok) {\n        const newComment = await response.json();\n        setComments([...comments, newComment]);\n      } else {\n        console.error(\"Error creating comment\");\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  const handleUpdateComment = async (commentId, commentData) => {\n    try {\n      const response = await fetch(`http://localhost:8000/api/blog/${props.blogId}/comments/${commentId}/edit/`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n        },\n        body: JSON.stringify(commentData)\n      });\n      if (response.ok) {\n        const updatedComment = await response.json();\n        const updatedComments = comments.map(comment => {\n          if (comment.id === updatedComment.id) {\n            return updatedComment;\n          } else {\n            return comment;\n          }\n        });\n        setComments(updatedComments);\n      } else {\n        console.error(\"Error updating comment\");\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  const handleDeleteComment = async commentId => {\n    try {\n      const response = await fetch(`http://localhost:8000/api/blog/${props.blogId}/comments/${commentId}/delete/`, {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n        }\n      });\n      if (response.ok) {\n        const updatedComments = comments.filter(comment => comment.id !== commentId);\n        setComments(updatedComments);\n      } else {\n        console.error(\"Error deleting comment\");\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Comments\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this), comments.map(comment => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: comment.author\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: comment.body\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleUpdateComment(comment.id, {\n          body: \"New comment body\"\n        }),\n        children: \"Update\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleDeleteComment(comment.id),\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }, this)]\n    }, comment.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(CommentForm, {\n      onSubmit: handleCreateComment\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 5\n  }, this);\n}\n_s(BlogComments, \"ByfV/t0DOiJY0nGyfgV+6QjIggQ=\");\n_c = BlogComments;\nvar _c;\n$RefreshReg$(_c, \"BlogComments\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","BlogComments","props","_s","comments","setComments","fetchComments","response","fetch","blogId","headers","Authorization","localStorage","getItem","data","json","error","console","handleCreateComment","commentData","method","body","JSON","stringify","ok","newComment","handleUpdateComment","commentId","updatedComment","updatedComments","map","comment","id","handleDeleteComment","filter","children","fileName","_jsxFileName","lineNumber","columnNumber","author","onClick","CommentForm","onSubmit","_c","$RefreshReg$"],"sources":["/Users/dillirai/Downloads/Full-Stack-Development/Practice Full Stack dev /Practice/drf-blog-api-master/django/frontend/src/components/comments/blog-comment.js"],"sourcesContent":["// import { useState, useEffect } from 'react';\n\n// export default function Comments({ authToken, blogId, commentId }) {\n//   const [commentData, setCommentData] = useState(null);\n//   const [newComment, setNewComment] = useState('');\n\n//   useEffect(() => {\n//     fetch(`http://example.com/api/blog/${blogId}/comments/${commentId}/edit/`, {\n//       method: 'GET',\n//       headers: {\n//         Authorization: `Token ${authToken}`,\n//       },\n//     })\n//       .then((response) => response.json())\n//       .then((data) => setCommentData(data))\n//       .catch((error) => console.error(error));\n//   }, [authToken, blogId, commentId]);\n\n//   const handleSubmit = (event) => {\n//     event.preventDefault();\n\n//     fetch(`http://example.com/api/blog/${blogId}/comments/${commentId}/edit/`, {\n//       method: 'PUT',\n//       headers: {\n//         Authorization: `Token ${authToken}`,\n//         'Content-Type': 'application/json',\n//       },\n//       body: JSON.stringify({ comment: newComment }),\n//     })\n//       .then((response) => response.json())\n//       .then((data) => setCommentData(data))\n//       .catch((error) => console.error(error));\n//   };\n\n//   if (!commentData) {\n//     return <p>Loading...</p>;\n//   }\n\n//   return (\n//     <form onSubmit={handleSubmit}>\n//       <textarea\n//         value={newComment}\n//         onChange={(event) => setNewComment(event.target.value)}\n//       />\n//       <button type=\"submit\">Save</button>\n//     </form>\n//   );\n// }\n\nimport React, { useState, useEffect } from 'react';\n\nfunction BlogComments(props) {\n  const [comments, setComments] = useState([]);\n\n  useEffect(() => {\n    const fetchComments = async () => {\n      try {\n        const response = await fetch(`http://localhost:8000/api/blog/${props.blogId}/comments/`, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n          },\n        });\n\n        const data = await response.json();\n        setComments(data);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    fetchComments();\n  }, [props.blogId]);\n\n  const handleCreateComment = async (commentData) => {\n    try {\n      const response = await fetch(`http://localhost:8000/api/blog/${props.blogId}/comments/`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n        body: JSON.stringify(commentData),\n      });\n\n      if (response.ok) {\n        const newComment = await response.json();\n        setComments([...comments, newComment]);\n      } else {\n        console.error(\"Error creating comment\");\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleUpdateComment = async (commentId, commentData) => {\n    try {\n      const response = await fetch(`http://localhost:8000/api/blog/${props.blogId}/comments/${commentId}/edit/`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n        body: JSON.stringify(commentData),\n      });\n\n      if (response.ok) {\n        const updatedComment = await response.json();\n        const updatedComments = comments.map((comment) => {\n          if (comment.id === updatedComment.id) {\n            return updatedComment;\n          } else {\n            return comment;\n          }\n        });\n        setComments(updatedComments);\n      } else {\n        console.error(\"Error updating comment\");\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  const handleDeleteComment = async (commentId) => {\n    try {\n      const response = await fetch(`http://localhost:8000/api/blog/${props.blogId}/comments/${commentId}/delete/`, {\n        method: \"DELETE\",\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n        },\n      });\n\n      if (response.ok) {\n        const updatedComments = comments.filter((comment) => comment.id !== commentId);\n        setComments(updatedComments);\n      } else {\n        console.error(\"Error deleting comment\");\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return (\n    <div>\n      <h2>Comments</h2>\n      {comments.map((comment) => (\n        <div key={comment.id}>\n          <h3>{comment.author}</h3>\n          <p>{comment.body}</p>\n          <button onClick={() => handleUpdateComment(comment.id, { body: \"New comment body\" })}>Update</button>\n          <button onClick={() => handleDeleteComment(comment.id)}>Delete</button>\n        </div>\n      ))}\n      <CommentForm onSubmit={handleCreateComment} />\n    </div>\n  );\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}