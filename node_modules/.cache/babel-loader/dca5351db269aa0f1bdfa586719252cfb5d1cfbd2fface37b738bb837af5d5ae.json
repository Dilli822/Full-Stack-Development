{"ast":null,"code":"var _jsxFileName = \"/Users/dillirai/Downloads/Full-Stack-Development/Practice Full Stack dev /Practice/drf-blog-api-master/django/frontend/src/components/likes/blog_Likes.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { IconButton } from \"@mui/material\";\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport ShareIcon from '@mui/icons-material/Share';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Likes(_ref) {\n  _s();\n  let {\n    blogId,\n    likes,\n    likedBy,\n    authorId\n  } = _ref;\n  const [isLiked, setIsLiked] = useState(likedBy.includes(authorId));\n  const [numLikes, setNumLikes] = useState(likes);\n  const [likedByList, setLikedByList] = useState(likedBy);\n  const [error, setError] = useState(\"\");\n  const [blogs, setBlogs] = useS;\n  useEffect(() => {\n    setIsLiked(likedBy.includes(authorId));\n  }, [likedBy, authorId]);\n  const handleLikeClick = async () => {\n    try {\n      setNumLikes(prevNumLikes => {\n        let newLikes = prevNumLikes;\n        let newLikedByState = likedByList;\n        let newLikedState = !isLiked;\n        if (newLikedState) {\n          newLikes += 1;\n          newLikedByState = [...likedByList, authorId];\n        } else {\n          newLikes -= 1;\n          newLikedByState = likedByList.filter(id => id !== authorId);\n        }\n\n        // Check if unliking a post that was already liked by the user\n        if (!newLikedState && likedByList.includes(authorId)) {\n          newLikes -= 1;\n        }\n        setIsLiked(newLikedState);\n        setLikedByList(newLikedByState);\n\n        // Call API to update like state\n        fetch(`http://localhost:8000/api/blog/likes/update/${blogId}/`, {\n          method: \"PUT\",\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            liked: newLikedState,\n            likes: newLikes,\n            liked_by: newLikedByState\n          })\n        });\n        return newLikes;\n      });\n    } catch (error) {\n      console.error(error);\n      setError(\"Failed to update like state.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"blogs\",\n      children: blogs.map(blog => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: blog.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: blog.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Author: \", blog.author.first_name, \" \", blog.author.last_name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\" \", blog.liked_by]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Likes: \", blog.likes]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this), \"liked/by\", blog.liked_by, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 25\n        }, this), \"author id\", blog.author_id, /*#__PURE__*/_jsxDEV(IconButton, {\n          children: /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n            color: blog.liked_by.includes(blog.author_id) ? \"error\" : \"primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 3\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 1\n        }, this)]\n      }, blog.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 8\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n_s(Likes, \"Azi/aAtXD1KSebx4tVNJX72m9DE=\");\n_c = Likes;\nvar _c;\n$RefreshReg$(_c, \"Likes\");","map":{"version":3,"names":["useState","useEffect","IconButton","FavoriteIcon","ShareIcon","jsxDEV","_jsxDEV","Likes","_ref","_s","blogId","likes","likedBy","authorId","isLiked","setIsLiked","includes","numLikes","setNumLikes","likedByList","setLikedByList","error","setError","blogs","setBlogs","useS","handleLikeClick","prevNumLikes","newLikes","newLikedByState","newLikedState","filter","id","fetch","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","liked","liked_by","console","children","className","map","blog","title","fileName","_jsxFileName","lineNumber","columnNumber","content","author","first_name","last_name","author_id","color","_c","$RefreshReg$"],"sources":["/Users/dillirai/Downloads/Full-Stack-Development/Practice Full Stack dev /Practice/drf-blog-api-master/django/frontend/src/components/likes/blog_Likes.js"],"sourcesContent":["\nimport { useState, useEffect } from \"react\";\nimport { IconButton } from \"@mui/material\";\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport ShareIcon from '@mui/icons-material/Share';\n\nexport default function Likes({ blogId, likes, likedBy, authorId }) {\n  const [isLiked, setIsLiked] = useState(likedBy.includes(authorId));\n  const [numLikes, setNumLikes] = useState(likes);\n  const [likedByList, setLikedByList] = useState(likedBy);\n  const [error, setError] = useState(\"\");\n  const [blogs, setBlogs] = useS\n\n  useEffect(() => {\n    setIsLiked(likedBy.includes(authorId));\n  }, [likedBy, authorId]);\n\n  const handleLikeClick = async () => {\n    try {\n      setNumLikes((prevNumLikes) => {\n        let newLikes = prevNumLikes;\n        let newLikedByState = likedByList;\n        let newLikedState = !isLiked;\n\n        if (newLikedState) {\n          newLikes += 1;\n          newLikedByState = [...likedByList, authorId];\n        } else {\n          newLikes -= 1;\n          newLikedByState = likedByList.filter((id) => id !== authorId);\n        }\n\n        // Check if unliking a post that was already liked by the user\n        if (!newLikedState && likedByList.includes(authorId)) {\n          newLikes -= 1;\n        }\n\n        setIsLiked(newLikedState);\n        setLikedByList(newLikedByState);\n\n        // Call API to update like state\n        fetch(`http://localhost:8000/api/blog/likes/update/${blogId}/`, {\n          method: \"PUT\",\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`,\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            liked: newLikedState,\n            likes: newLikes,\n            liked_by: newLikedByState,\n          }),\n        });\n\n        return newLikes;\n      });\n    } catch (error) {\n      console.error(error);\n      setError(\"Failed to update like state.\");\n    }\n  };\n\n  return (\n    <div>\n       <div className=\"blogs\">\n        {blogs.map((blog) => (\n          <div key={blog.id}>\n            <h3>{blog.title}</h3>\n            <p>{blog.content}</p>\n            <p>\n              Author: {blog.author.first_name} {blog.author.last_name}\n            </p>\n            <p> {blog.liked_by}</p>\n            <p>Likes: {blog.likes}</p>\nliked/by{blog.liked_by} <br></br>\nauthor id{blog.author_id}\n\n<IconButton>\n  <FavoriteIcon color={blog.liked_by.includes(blog.author_id) ? \"error\" : \"primary\"} />\n</IconButton>\n\n\n          </div>\n        ))}\n      </div>\n    </div>\n    )}\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}